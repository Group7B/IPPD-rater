<section ng-controller="RatingsController" ng-init="find()">
  <div class="page-header">
    <h1>Project Ranking</h1>
   <label>Search Project: <input ng-model="searchText"></label>
  <input type="submit">
  </div>
  <div class="list-group">
    <button class="btn btn-primary btn-sm" ng-click="sortType = 'posterRating'"> Poster </button>
    <button class="btn btn-primary btn-sm" ng-click="sortType = 'presentationRating'"> Presentation </button>
    <button class="btn btn-primary btn-sm" ng-click="sortType = 'demoRating'"> Demo </button>
    <br>
    <a ng-repeat="rating in ratings | filter: {$: authentication.user._id} : true | orderBy:sortType:sortReverse" ui-sref="projects.rate({projectId: rating.project._id})" class="list-group-item">
      <div class="row">
        <div class="col-sm-2">
          <div class="post-thumb"><img class="logo-icon" ng-if="rating.project.logo" ng-src='modules/projects/client/img/logos/{{rating.project.logo}}' alt="No img"></div>
          <div class="post-thumb"><img class="logo-icon" ng-if="!rating.project.logo" src='modules/projects/client/img/logos/default.jpg' alt="No img"></div>
        </div>
        <div class="col-sm-10">
          <p  class="list-group-item-heading" ng-bind="rating.project.teamName"></p><br>
          <div class="list-group-item-text" ng-bind="rating.project.description"></div><br>

          <div class="list-group-item" ng-show="sortType === 'posterRating'">
              <text>Poster Rating: </text>
              <text class="list-group-item-text" ng-bind="getStars(rating.posterRating)"></text>
          </div>
          <div class="list-group-item" ng-show="sortType === 'presentationRating'">
              <text>Presentation Rating: </text>
              <text class="list-group-item-text" ng-bind="getStars(rating.presentationRating)"></text>
          </div>
          <div class="list-group-item" ng-show="sortType === 'demoRating'">
              <text>Demo Rating: </text>
              <text class="list-group-item-text" ng-bind="getStars(rating.demoRating)"></text>
          </div>
          <div class="list-group-item">
              <text>My Comment: </text>
              <text class="list-group-item-text" ng-bind="rating.comment"></text>
          </div>
          <div class="cf"></div>
        </div>
      </div>
    </a>

    <div class="form-group">
      <button ui-sref="projects.list()" class="btn btn-primary btn-lg btn-block"> Go to Projects </button>
    </div>

  </div>
  <div class="alert alert-warning text-center" ng-if="projects.$resolved && !projects.length">
    No projects yet, why don't you <a ui-sref="projects.create">create one</a>?
  </div>
</section>
